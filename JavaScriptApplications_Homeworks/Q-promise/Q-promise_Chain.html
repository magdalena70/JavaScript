<!DOCTYPE html>
<html>
	<head>
		<title>Q promise - Chain</title>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/q.js/0.9.2/q.js"></script>
	</head>
	<body>
		<p>Calculate Math.pow(5.6, 2) >>></p>
		<div id="result"></div>
		<div id="result1"></div>
		<div id="result2"></div>
		<script>
			function powerPromise(number, power){
				var deferred = Q.defer();
				if(number >= 0){
					deferred.resolve(Math.pow(number, power));
				}else{
					deferred.reject('Number cannot be negative.');
				}
				return deferred.promise;
			}
			
			powerPromise(5.6, 2)
				.then(function(result){
					document.getElementById('result').innerHTML = 'Result before rounding - ' + result;
					return powerPromise(result, 2);
				})
				.then()
				.then()
				.then(function(result){
					document.getElementById('result1').innerHTML = 'Math.pow(' + Math.pow(5.6, 2) +', 2) before rounding - ' + result;
					return Math.round(result);
				})
				.then(function(result){
					document.getElementById('result2').innerHTML = 'Result after rounding - ' + result;
				}).done(); // catch all errors
		</script>
	</body>
</html>